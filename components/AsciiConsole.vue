<script setup>
import { onMounted, onBeforeUnmount, ref } from 'vue'

const frames = [
  `
                                 =%%=
                               +##+
                              =%%=
                             ###%=      +%==
                           =%%%%#=    =#%##%%%==
                           =%#%=#%===#%%%%%##%#%%=
                           +%#=   =#%%##%%+=====#=
            ==+%%%%%%%*+==%%#%%#%%#%%%%%#%=
=     ==%%%##%#%##%##%%#%%#%%%#%%#%%##%%#=
+%===#%##+==#%%%%%%%%#%%#%%#%%#%%#%%%%#%=
=%#%%#=     =#%#%%#%%#%%#%%#%%%#%%##%%+
        =====+%%#%%#%%#%%#%%##%%#%%%##=
        =##%%%#%%#=   ==#%%%%%#%%#%%%=
        =%+=#+                 *%#==
        =%=  =%=              =##=
      =%#=     #=     %%%*-  =%=
               *#         ==+%%=
                             =+
                            =#%=
  `,
  `                               =+%#=
                                =%#=
                               *##+
                             =%#%%=   ==%%%==
                             +%%#=   ==##%##%%=-
                            *%##=%+===%%%%%%#%%%%=
                           =%%#= ==#%%#%%#= ====#=
               =%%%%%%%%%%#%#%%%##%%#%%#%=
        ==+%%%#%##%##%##%%#%%#%%%%#%%#%%+
=== ==%#%%=  *%%%%%%%%%%#%%#%%##%%#%%#%%-
=##%%#%==    =%#%%#%%#%%#%%#%%%%#%%#%%#
  =*=          ==%%#%%#%%#%%##%%#%%#%%=
               =%#%%#+    ==#%#%%#%%#=
             =%%=  +%=         *%*=##=
                =+%%#+=       =#=   =+%=
                  -=+ ==##=  +%==#%====
                  =#=  =*#%%+=                    `,
  `                                =%%=
                                =%#%=
                              =%#%=
                             ##%%#=     *#==
                            =%#%%=    =%%#%%##=
                           -%%%###-  +%#%%#%%#%%==
                           =##%# ==%%#%%#%%++%##%+
               =*%%%%%%#+##+#%%%%#%%#%%%#%===
         ===###%%##%##%%%%%%%%##%%#%%%#%%=
     +#%%##%=#%%%%%%%%#%##%%#%%%#%%#%%#%=
=%+=%%%= ====*%##%%#%%#%%%#%%#%%#%%#%%%*
=%%%+=        =%%#%%#%%#%%#%%#%%%#%%##%=
                  *%#%%+=%%#%%##%%#%%%#
                 =%%=##=    ===%#%%#%%#%#=
                =%##==%#=      =%+      *%=
                     =*#%#==   +%+ =+=#%=
                           =%%#%%=    =           `,
  `                                =%%%
                                =%#%=
                              +%%%=
                            =%#%%#=      ==
                            #%%#%=   =+%%#%%%+
                           =%#%%#%= =%%#%%##%%%+
                           =%#+  =*%%#%%#%%%##%%%=
               =+%%%%%%%%%##%%#%%##%%#%%#+     ==
       ===++#%%#%%##%##%#%%%#%%#%%%#%%#%+
    =%#%%#%%==#%%#%%%%%%#%%%#%%#%%%#%%#*
  =%#%+=      %%#%%##%%#%%#%%#%%##%%#%%#
=%#%=          =%%#%%#%%%#%%%#%%%%#%%#+=
                 =+%%#%+##%#%%##%%#%%%%%#=+%=
                   =#%%+       ====##%=   =#=
                    #%#%%%==-        =#+  =#=
                    =%#=    ==%*  +#=     +%=
                      =%*-
                        =%#
                          =%%=                    `,
  `                                =%%=
                                =##%=
                              =%%%=
                            =%#%#%=      =+=
                            #%%%#=   ==+%#%%%#=
                           %%#%=+#*==%%#%%##%%%*
                           =%#%===#%#%%#%%**+%#%%=
              ==%%%%%%%%%%##%%##%##%%#%%#=     ===
    =#%%%%%%%=%%##%##%##%%%%#%%%%%%#%%#%=
  =%%#%+===  +%%%%%%%%%%##%%#%%##%%#%%##
  *%%+       =##%%#%%#%%%%#%%#%%%#%%#%%=
=*+=          =%#%%#%%##%%#%%#%%%#%%#%%#%%%=
               =#%%#=#%+==+#%%######+######%#=
               =%##   +%=              =%=   =#=
              =#%=     =*%#=        =##+=      +#=
              =#*         ==#%%#=               ==
               =%=             =
                =#===                             `,
  `                              =%%#
                              -=%*
                            +%%%=
                          =%%#%%-       =+=
                          +%%#%%=   ==%%%#%%%=
                         =%#%=  =*#*%%##%%##%%+
                 ===      =#%%+%%%%%#%%%#===##%%=
    =====+===*%%#%#%%%%%%#%%#%%#%##%%#%+      ++
=+++%##%##*==##%%%#%##%#%%#%%#%%%%%#%%=
 =%%==      %%%#%%%%%%%#%%#%%#%%#%%#%%=
+%=         #%%#%#%#%%#%%#%%#%%#%%#%%#=====
==          %#%%%#%# =###%%#%%#%%#%##%%#==#=
          =%%#=  =%#                  ==%#+
        =%#=     +%#                     =%%=
       =#+       =%%=                   =#= =#%#+=
       =+          *#=                          =
      =%#=          =%+=-                         `,
  `                               =%%=
                                +%*
                             +%%##
                            +%#%%        ====
                           +%%#%%=-  ==%#%##%%-
                           *%%=  ==%#%#%%%%%#%%=
              ===#%%%==  ===+#%%#%%#%%#%%====*%%#=
      ==#%%%%###%%##%#%%#%#%%#%%#%%#%%%+
  +%%#%+#=   #%%#%%%%#%%#%%#%%#%%#%%###
 ==          #%%#%%#%%#%%#%%#%%#%%#%%%=
           =#%#%%#===+##%%#%%#%%#%%#%%#%%+%=
        =%#%=##%=                   =%#=   =*+=
      =%*= +%%=                      =+#=     =*=
 ===%#=    %#                          =#=      ==
 ==       =%=                                     `,
  `                              +%#=
                              =%#=
                           =%#%*
                          =#%%#+     ==  =+=
                          *%#==#%+  =##%%%#%%=
                          %%%  ==#%%#%%##%%##%=
           =#%%%%%%%%#===###%%%#%#%%#%%%=====%%%-
==*###%%%%#+=##%##%##%%##%%%##%%%#%%%##=
=+%%%##=    %%%%%%%%%#%%%#%%%%#%%%##%%
           =*#%#%%#%%#%%%#%#%%#%#%%%#%=
       =%%#%%#%=      =+#%%#%%%%#%%%#%%#+
    =%#===%#=                    =#%    =+%+=
=+##=   +#=                       %=        =+*+#=
      =%=
    %%=                                           `,
  `                              =%%+
                               +##=
                            =##%#
                           =#%%%*        ===
                           =%%##%=    =%#%#%%%=
                          =%%#=  =+%%#%%#%%##%%+
               =====       +%%##%%##%%#%%#%**%#%%=
=+===   ==%%%%#%##%%#%%%%%%#%%#%%#%%#%%#%=     =#=
 =%#%%%#%%+- %%%%%#%%##%##%%#%%#%%%%#%%#=
   ==+===   =#%#%%#%%%%%%%#%%#%%#%#%%#%=
        =====#%%#%%##%%#%%#%%#%%#%%#%%+
       =#%##%%#%%=    =##%%#%%#%%#%%#%%=
      +%%%#==               -==#%*=  +#%%
 =%%%%#=                      %#=       +%+
   ==                        *#=          +#=
                            +=             =+%=
                           %#=                =%= `,
  `                              =%%*
                              =%#%=
                             =%##
                            #%#%+        =+=
                           *%%#%=     =%#%%#%%
                           #%%+=#%+- =%%#%%#%%#+
                           #%##  ==%%##%%#%%#%%%%+
          =+#%%%%%%%%%%%**%%%#%%%#%%#%%#%+==   ===
=%%#=#%%%#%*=##%##%##%#%%#%%#%%#%%#%%%%#%=
 =%#%##%%=  #%%%%%%%%%#%%#%%#%%#%%#%%#%+
   ===      =%##%%#%%#%%#%%#%%#%%#%%#%=
        =%%#%%%%#%%#%%%#%%#%%#%%#%%#%%
       +#+%%##%%#=     =%#%%#%%#%%#%*
      =#   #+                 +%%#%#
   =%%%=   =%=               %%+=+%=
          =#*               =%=  =#=
                    =%%%%%%#==   =%=              `,
  `                               #%%+
                               =#%%=
                             =+%#=
                            =%#%%=      =%%==
                           =#%%#*    =%#%#%%#%=
                           *#%%#%%*==+%%%#%%#%%%=
                           *%#%===##%##%%%#=+#%%%*
             =+*%%%%%%%%#%%#%%#%##%%%%%###==
=#%%#%%%%%%%#*%#%##%##%%#%%#%%#%%%#%#%%%%=
=+#%%##%##+==#%%%%%%%%#%%#%%#%%#%%#%%##%=
 ==#%#+==    =#%#%%#%%#%%#%%#%%#%%%#%%%=
            ===%#%%#%%%#%%#%%#%%##%%#%=
           #%#%#%#%*=   =+=%%#%%%%#%%=
            =###%#            ##%%+
              ##==#%==     ##%%==#=
              +%=   =%=    *#*#%#%=
              ==-    ==  =%=
                        %#=                       `

]

function replaceCharacters(frame) {
  return frame
    .replace(/%/g, '█')
    .replace(/#/g, '▓')
    .replace(/\+/g, '░')
    .replace(/=/g, '▒')
}

const frameIndex = ref(0)
let intervalId = null
let frameCounter = 0
const MAX_FRAMES_BEFORE_CLEAR = 30

onMounted(() => {
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches
  if (!prefersReducedMotion) {
    intervalId = setInterval(() => {
      if (frameCounter >= MAX_FRAMES_BEFORE_CLEAR) {
        console.clear()
        frameCounter = 0
      }

      const rawFrame = `\n\n${frames[frameIndex.value]}\n`
      const formattedFrame = replaceCharacters(rawFrame)

      console.log(formattedFrame)

      frameIndex.value = (frameIndex.value + 1) % frames.length
      frameCounter++
    }, 200)
  }
})

onBeforeUnmount(() => {
  if (intervalId) clearInterval(intervalId)
})
</script>

<template>
  <!-- aucun rendu DOM -->
</template>
